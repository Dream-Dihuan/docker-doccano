(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1203:function(t,e,r){"use strict";r.r(e);var n=r(1),o=(r(22),r(153),r(28),r(9),r(31),r(143),r(124),r(0)),c=r(803),l=o.default.extend({layout:"project",middleware:["check-auth","auth","setCurrentProject","isProjectAdmin"],validate:function(t){var e=t.params;return/^\d+$/.test(e.id)},data:function(){return{exportApproved:!1,file:null,fileFormatRules:c.a,formats:[],isProcessing:!1,polling:null,selectedFormat:null,taskId:"",valid:!1}},computed:{projectId:function(){return this.$route.params.id},example:function(){var t=this;return this.formats.find((function(e){return e.name===t.selectedFormat})).example.trim()}},created:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$repositories.downloadFormat.list(t.projectId);case 2:t.formats=e.sent;case 3:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){clearInterval(this.polling)},methods:{reset:function(){this.$refs.form.reset(),this.taskId="",this.exportApproved=!1,this.selectedFormat=null,this.isProcessing=!1},downloadRequest:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isProcessing=!0,e.next=3,t.$repositories.download.prepare(t.projectId,t.selectedFormat,t.exportApproved);case 3:t.taskId=e.sent,t.pollData();case 5:case"end":return e.stop()}}),e)})))()},pollData:function(){var t=this;this.polling=setInterval(Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.taskId){e.next=5;break}return e.next=3,t.$repositories.taskStatus.get(t.taskId);case 3:e.sent.ready&&(t.$repositories.download.download(t.projectId,t.taskId),t.reset());case 5:case"end":return e.stop()}}),e)}))),1e3)}}}),d=r(100),f=r(104),h=r.n(f),v=r(364),m=r(695),w=r(694),x=r(806),y=r(714),_=r(707),j=r(759),O=r(350),k=r(234),V=r(717),$=r(769),C=r(135),P=r(748),B=r(136),R=r(356),component=Object(d.a)(l,(function(){var t=this,e=t._self._c;t._self._setupProxy;return e("v-container",{staticClass:"pt-6",attrs:{fluid:""}},[e("v-row",{attrs:{justify:"center"}},[e("v-col",{attrs:{cols:"12",md:"8",lg:"6"}},[e("v-card",{staticClass:"elevation-8",class:{"dark-mode-card":t.$vuetify.theme.dark}},[e("v-toolbar",{staticClass:"rounded-t-lg",attrs:{color:"primary",dark:"",flat:""}},[e("v-toolbar-title",[t._v("\n            "+t._s(t.$t("dataset.exportDataTitle"))+"\n          ")])],1),t._v(" "),e("v-card-text",{staticClass:"mt-5"},[e("v-overlay",{attrs:{value:t.isProcessing}},[e("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),t._v(" "),e("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[e("v-select",{attrs:{items:t.formats,"hide-details":"auto","item-text":"name",label:t.$t("generic.type"),outlined:"",rules:t.fileFormatRules(t.$t("rules.fileFormatRules"))},model:{value:t.selectedFormat,callback:function(e){t.selectedFormat=e},expression:"selectedFormat"}}),t._v(" "),t.selectedFormat?e("v-sheet",{staticClass:"mt-2 pa-5",attrs:{dark:!t.$vuetify.theme.dark,light:t.$vuetify.theme.dark}},[e("pre",[t._v(t._s(t.example))])]):t._e(),t._v(" "),e("v-checkbox",{staticClass:"mt-4",attrs:{label:t.$t("dataset.exportApprovedOnly"),"hide-details":""},model:{value:t.exportApproved,callback:function(e){t.exportApproved=e},expression:"exportApproved"}})],1)],1),t._v(" "),e("v-card-actions",{staticClass:"px-6 pb-6"},[e("v-spacer"),t._v(" "),e("v-btn",{staticClass:"text-capitalize primary",attrs:{disabled:!t.valid,depressed:""},on:{click:t.downloadRequest}},[t._v("\n            "+t._s(t.$t("generic.export"))+"\n          ")])],1)],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;h()(component,{VBtn:v.a,VCard:m.a,VCardActions:w.a,VCardText:w.b,VCheckbox:x.a,VCol:y.a,VContainer:_.a,VForm:j.a,VOverlay:O.a,VProgressCircular:k.a,VRow:V.a,VSelect:$.a,VSheet:C.a,VSpacer:P.a,VToolbar:B.a,VToolbarTitle:R.a})},748:function(t,e,r){"use strict";r(301);var n=r(2);e.a=Object(n.j)("spacer","div","v-spacer")},759:function(t,e,r){"use strict";var n=r(5),o=(r(10),r(11),r(153),r(102),r(16),r(17),r(12),r(9),r(300),r(113),r(13),r(124),r(15)),c=r(162),l=r(183);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){Object(n.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.a=Object(o.a)(c.a,Object(l.b)("form")).extend({name:"v-form",provide:function(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:function(){return{inputs:[],watchers:[],errorBag:{}}},watch:{errorBag:{handler:function(t){var e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput:function(input){var t=this,e=function(input){return input.$watch("hasError",(function(e){t.$set(t.errorBag,input._uid,e)}),{immediate:!0})},r={_uid:input._uid,valid:function(){},shouldValidate:function(){}};return this.lazyValidation?r.shouldValidate=input.$watch("shouldValidate",(function(n){n&&(t.errorBag.hasOwnProperty(input._uid)||(r.valid=e(input)))})):r.valid=e(input),r},validate:function(){return 0===this.inputs.filter((function(input){return!input.validate(!0)})).length},reset:function(){this.inputs.forEach((function(input){return input.reset()})),this.resetErrorBag()},resetErrorBag:function(){var t=this;this.lazyValidation&&setTimeout((function(){t.errorBag={}}),0)},resetValidation:function(){this.inputs.forEach((function(input){return input.resetValidation()})),this.resetErrorBag()},register:function(input){this.inputs.push(input),this.watchers.push(this.watchInput(input))},unregister:function(input){var t=this.inputs.find((function(i){return i._uid===input._uid}));if(t){var e=this.watchers.find((function(i){return i._uid===t._uid}));e&&(e.valid(),e.shouldValidate()),this.watchers=this.watchers.filter((function(i){return i._uid!==t._uid})),this.inputs=this.inputs.filter((function(i){return i._uid!==t._uid})),this.$delete(this.errorBag,t._uid)}}},render:function(t){var e=this;return t("form",{staticClass:"v-form",attrs:f({novalidate:!0},this.attrs$),on:{submit:function(t){return e.$emit("submit",t)}}},this.$slots.default)}})},803:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return o})),r.d(e,"d",(function(){return c})),r.d(e,"c",(function(){return l}));r(9);var n=function(t){return[function(e){return!!e||t.labelRequired},function(e){return e&&e.length<=30||t.labelLessThan30Chars}]},o=function(t){return[function(e){return!!e||t.fileFormatRequired}]},c=function(t){return[function(e){return!!e||t.fileRequired},function(e){return!e||e.size<1e6||t.fileLessThan1MB}]},l=function(){return[function(t){return!!t||"Name is required"}]}}}]);